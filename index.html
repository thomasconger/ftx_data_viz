<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="./dist/main.css" />
    <script src="./dist/main.js" defer></script>
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Koulen&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>


    <title>Going For Broke</title>
  </head>

  <body>



    <header>
      <canvas id="hero-canvas"></canvas>
      <div class="title-wrapper">
        <h1 class="title">
          Going for <br> Broke
        </h1>

      </div>

      <p>
        By Thomas Conger
      </p>
      <div class ="byline">
        <ul>
          <li>LinkedIn</li>
          <li>GitHub</li>
        </ul>
      </div>

    </header>

    <main>

      <section>
        <p>
          Sam Bankman Fried told investors FTX's assets lost significant value in a short period of time leading up to the bankruptcy.
        </p>
        <figure class = "chart1">

        </figure>
        <figure>
          <!-- Second Valuation-->
        </figure>
      </section>

      <section>
        <p>
          This makes it one of the instances of fraud ever, and one of the single worst investment losses ever.
        </p>
        <figure>
          <!-- Comparison with other instances of fruad -->
        </figure>
        <figure>
          <!-- Comparison with other large investment losses-->
        </figure>
      </section>

      <section>
        <p>
          In the context of the financial system, this is still large, but on its own is a small peice of the overall pie.
        </p>
        <figure>
          <!-- Comparison with market cap of bitcoin and/or several cryptocurrencies -->
        </figure>
        <figure>
          <!-- Comparison with deposits of traditional and larger financial institutions-->
        </figure>
        <figure>
          <!-- Comparison with national GDP figures-->
        </figure>
      </section>

      <section>
        <p>
          But, this is still extraordinarily large. In human terms, it means...
        </p>
        <figure>
          <!-- XX,XXX people could retire-->
        </figure>
        <figure>
          <!-- XX,XXX children could go to college-->
        </figure>
        <figure>
          <!-- XXX,XXX iPhones-->
        </figure>
        <figure>
          <!-- If you had lost a million dollars per second whiel on this page, you would still need to lose XYZ much-->
        </figure>
      </section>

      <section>
        <p>
          The government spends XYZ amount every day -- are you making sure it's spent well?
        </p>
        <button>
          Register to vote.
        </button>
      </section>

    </main>

  </body>

  <script>

    // These margins are used in the range portion of the scale so that content is rendered with room for an axis

    let margin = {
      top: 25,
      right: 25,
      bottom: 25,
      left: 25
    }

    // this dummy data is randomly created and used to populate the scatter plot

    let data = d3.range(100).map((i) => {
      let point = {};
      point.x = i;
      point.y = Math.random() * 1500 + 50;
      return point;
    })

    // create an svg element and set its width and height to that of the window. by not setting a view box, the position and scale of the svg is set to the default
    const svg = d3.select('figure').append('svg')
      .attr('width', "750")
      .attr('height', "750")
      .attr('style','background-color: black')

    // now that we have a canvas to render our data on, we need to make sure that when we render the data it actually fits! D3 lets you easily create functions to transform data.
    // The domain takes in an array that specifies the min and max values of the data that you want displayed. The range specifies the min and max values of the svg. The scale function translates, according to a set proportion, the original domain value to the new range so that all of the data fits on the graph AND remains accurate.

    const y = d3.scaleLinear()
      .domain([
        0,
        d3.max(data, (d) => d.y)
      ])
      .range([
        750 - margin.bottom,
        margin.top
      ])

    const x = d3.scaleLinear()
      .domain(d3.extent(data, d => d.x))
      .range([
        margin.left,
       750 - margin.right
      ])

    // marks are created by translating the original data according to scales

    let marks = data.map(d => ({
      x: x(d.x),
      y: y(d.y)
    }))

    const bar = svg.selectAll('rect')
      .data(marks)
      .join('rect')
      .attr('width', 8)
      .attr('height', 8)
      .attr('x', (d) => d.x )
      .attr('y', (d) => d.y )
      .attr('fill', 'steelblue')

    const leftAxis = svg.append('g')
    .attr('transform', `translate(${margin.left}, 0)`)
    .attr('color', '#fff')
    .call(d3.axisLeft(y))

    const bottomAxis = svg.append('g')
      .attr('transform', `translate(0,${750 - margin.bottom })`)
      .attr('color', '#fff')
      .call(d3.axisBottom(x))


  </script>

</html>
